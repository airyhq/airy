apiVersion: v1
kind: ConfigMap
metadata:
  name: kafka-config
data:
  KAFKA_BROKERS: {{ .Values.config.kafka.brokers }}
{{- if .Values.config.kafka.authJaas }}
  AUTH_JAAS: {{ .Values.config.kafka.authJaas }}
{{- end }}
  KAFKA_MINIMUM_REPLICAS: "{{ .Values.config.kafka.minimumReplicas }}"
{{- if .Values.config.kafka.zookeepers }}
  ZOOKEEPER: {{ .Values.config.kafka.zookeepers }}
{{- end }}
  KAFKA_SCHEMA_REGISTRY_URL: {{ .Values.config.kafka.schemaRegistryUrl }}
  KAFKA_COMMIT_INTERVAL_MS: "{{ .Values.config.kafka.commitInterval }}"
  KAFKA_SASL_CA: |-
    {{ .Values.config.kafka.saslCaCertificate | nindent 4 | trim }}
  KAFKA_SASL_USERNAME: {{ .Values.config.kafka.saslUsername }}
  KAFKA_SASL_PASSWORD: {{ .Values.config.kafka.saslPassword }}
  KAFKA_KEY_TRUST_SECRET: {{ .Values.config.kafka.keyTrustSecret }}
